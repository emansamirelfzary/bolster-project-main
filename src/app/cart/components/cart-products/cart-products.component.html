<div class="container">
  <div class="py-5" >
    <div *ngIf="cartList; else emptyCart" >
      <div class=" w-100 overflow-x-auto">
    <table class="table" >
    <thead>
      <tr class=" text-uppercase">
      <th class="py-3">Product</th>
      <th class="py-3 name">name </th>
      <th class="py-3">price</th>
      <th class="py-3">quantity</th>
      <th class="py-3">total</th>
    </tr>
    </thead>
    <tbody>
      <tr *ngFor="let cartProduct of cartProducts|filterCartProducts">
        <td><a [routerLink]="['/productdetails',cartProduct.product.id]">
          <img [src]="cartProduct.product.imageCover" alt="product" width="100" class="product-img"><p class="text-muted fw-bold name-img d-none">{{cartProduct.product.title.split(" ").slice(0,3).join(" ")}}</p></a></td>
        <td class="name"><a [routerLink]="['/productdetails',cartProduct.product.id]"><p class="text-muted fw-bold">{{cartProduct.product.title.split(" ").slice(0,3).join(" ")}}</p></a>
          <p class="cate"><span class="text-muted fw-bold">category:</span>{{cartProduct.product.category.name}}</p>
        </td>
        <td class="text-muted fw-bold">
          {{cartProduct.price}} EGP
        </td>
        <td class="update-count"><span class="me-2 cursor text-muted" (click)="updateCount(cartProduct.count-1,cartProduct.product.id)"><i class="fa-solid fa-circle-minus fs-5"></i></span>{{cartProduct.count}} <span class="ms-2 cursor text-muted" (click)="updateCount(cartProduct.count+1,cartProduct.product.id)"><i class="fa-solid fa-circle-plus fs-5"></i></span></td>
        <td class="text-muted fw-bold">{{cartProduct.price * cartProduct.count}}EGP</td>
        <td><span class="cursor remove" (click)="removeProduct(cartProduct.product.id)"><i class="fa-solid fa-trash-can"></i></span></td>
      </tr>
    </tbody>
    </table>
    </div>
    <div class="row g-3 mt-3 mx-0">
      <div class="col-md-7">
        <a class="btn btn-light text-uppercase rounded-0 border border-black px-3" routerLink="/products">Continue Shopping</a>
      </div>
      <div class="col-md-5">
        <div class="shadow p-4">
          <h4 class="my-3">Cart Total</h4>
          <ul class="ps-0 mb-3">
            <li class="d-flex justify-content-between border p-2"><span>Subtotal</span><span>{{cartTotalPrice}}EGP</span></li>
            <li class="d-flex justify-content-between border p-2"><span>Shipping</span><span>50EGP</span></li>
            <li class="d-flex justify-content-between border p-2"><span>Total</span><span>{{cartTotalPrice+50}}EGP</span></li>
          </ul>
          <a class="btn btn-light text-uppercase rounded-0 border border-black px-3" [routerLink]="['/checkout/',cartId]">Proceed to Checkout</a>
        </div>
      </div>
    </div>
    </div>
    <ng-template #emptyCart>
      <div class="text-center">
      <img src="./assets/images/empty-cart.png" alt="empty wishlist" class="empty-img">
      <a class="btn btn-dark d-block w-25 mx-auto mt-2 rounded-0 py-2" routerLink="/products">go shop</a>
      </div>
    </ng-template>
  </div>
</div>
